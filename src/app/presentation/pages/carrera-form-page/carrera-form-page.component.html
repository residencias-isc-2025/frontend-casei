<div class="container mx-auto p-6 max-w-5xl">
  <h1 class="text-2xl font-bold text-gray-800 mb-6">
    {{ isEditing ? "Editar" : "Agregar" }} Carrera
  </h1>

  <form [formGroup]="carreraForm" (ngSubmit)="onSubmit()" class="spacey6">
    <!-- Información general -->
    <section class="bg-white rounded-xl shdow p-6 border border-gray-200">
      <h2 class="text-lg font-semibold text-gray-700 mb-4">
        Información general
      </h2>

      <!-- <div class="mt-4">
        <label class="block text-gray-600 font-medium mb-1">
          Misión
        </label>
        <textarea
          formControlName="mision"
          rows="3"
          class="w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500"
        >
        </textarea>
      </div> -->

      <!-- <div class="mt-4">
        <label class="block text-gray-600 font-medium mb-1">
          Visión
        </label>
        <textarea
          formControlName="vision"
          rows="3"
          class="w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500"
        >
        </textarea>
      </div> -->

      <!-- <div class="mt-4">
        <label class="block text-gray-600 font-medium mb-1"> Objetivo </label>
        <textarea
          formControlName="objetivo"
          rows="3"
          class="w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500"
        >
        </textarea>
      </div> -->

      <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
        <div>
          <label class="block text-gray-600 font-medium mb-1">Nombre</label>
          <input
            type="text"
            formControlName="nombre"
            class="w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500"
          />
        </div>

        <div>
          <label class="block text-gray-600 font-medium mb-1">
            Área de adscripción
          </label>
          <select
            formControlName="adscripcion"
            class="w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500"
          >
            <option value="" selected>Seleccionar área de adscripción</option>
            @for(adscripcion of adscripcionesList(); track adscripcion.id) {
            <option [value]="adscripcion.id">
              {{ adscripcion.nombre }}
            </option>
            }
          </select>
        </div>
      </div>

      <div class="mt-4">
        <label class="block text-gray-600 font-medium mb-1"
          >Objetivos específicos</label
        >
        <div class="grid grid-cols-1 md:grid-cols-3 gap-2">
          @for (objetivoEs of paginate(objetivosEspecificosList(),
          currentPage.objetivosEspecificos()); track objetivoEs.id) {
          <label
            class="flex items-center bg-gray-100 rounded-lg px-4 py-2 cursor-pointer hover:bg-gray-200 transition"
          >
            <input
              type="checkbox"
              [value]="objetivoEs.id"
              [checked]="
                carreraForm.value.objetivo_especifico === objetivoEs.id
              "
              (change)="
                toggleSimpleCheckbox('objetivo_especifico', objetivoEs.id)
              "
              class="form-checkbox text-blue-600 rounded mr-3 h-4 w-4"
            />
            <span class="text-gray-800 text-sm">{{
              objetivoEs.descripcion
            }}</span>
          </label>
          }
        </div>

        <div class="flex justify-center gap-2 mt-3">
          <app-pagination
            [totalItems]="objetivosEspecificosList().length"
            [itemsPerPage]="ITEMS_PER_PAGE"
            [currentPage]="currentPage.objetivosEspecificos()"
            (pageChanged)="currentPage.objetivosEspecificos.set($event)"
          />
        </div>
      </div>

      <div class="mt-4">
        <label class="block text-gray-600 font-medium mb-1"
          >Atributos de egreso</label
        >
        <div class="grid grid-cols-1 md:grid-cols-3 gap-2">
          @for (atributoE of paginate(atributosEgresoList(),
          currentPage.atributosEgreso()); track atributoE.id) {
          <label
            class="flex items-center bg-gray-100 rounded-lg px-4 py-2 cursor-pointer hover:bg-gray-200 transition"
          >
            <input
              type="checkbox"
              [value]="atributoE.id"
              [checked]="
                carreraForm.value.atributos_egreso?.includes(atributoE.id)
              "
              (change)="toggleCheckbox('atributos_egreso', atributoE.id)"
              class="form-checkbox text-blue-600 rounded mr-3 h-4 w-4"
            />
            <span class="text-gray-800 text-sm">{{
              atributoE.descripcion
            }}</span>
          </label>
          }
        </div>

        <div class="flex justify-center gap-2 mt-3">
          <app-pagination
            [totalItems]="objetivosEspecificosList().length"
            [itemsPerPage]="ITEMS_PER_PAGE"
            [currentPage]="currentPage.objetivosEspecificos()"
            (pageChanged)="currentPage.objetivosEspecificos.set($event)"
          />
        </div>
      </div>
    </section>
  </form>
</div>
